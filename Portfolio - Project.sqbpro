<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="Portfolio - Project.db" readonly="0" foreign_keys="1" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="structure browser pragmas query" current="3"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="100"/><column_width id="3" width="6309"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/><expanded_item id="4" parent="1"/></tab_structure><tab_browse><table title="Covid-Vaccinations" custom_title="0" dock_id="1" table="4,18:mainCovid-Vaccinations"/><dock_state state="000000ff00000000fd0000000100000002000005f4000002aefc0100000001fb000000160064006f0063006b00420072006f00770073006500310100000000000005f40000013300ffffff000002580000000000000004000000040000000800000008fc00000000"/><default_encoding codec=""/><browse_table_settings><table schema="main" name="Covid-Vaccinations" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="70"/><column index="2" value="54"/><column index="3" value="93"/><column index="4" value="85"/><column index="5" value="40"/><column index="6" value="46"/><column index="7" value="46"/><column index="8" value="46"/><column index="9" value="40"/><column index="10" value="47"/><column index="11" value="47"/><column index="12" value="47"/><column index="13" value="124"/><column index="14" value="70"/><column index="15" value="70"/><column index="16" value="62"/><column index="17" value="54"/><column index="18" value="54"/><column index="19" value="47"/><column index="20" value="47"/><column index="21" value="47"/><column index="22" value="47"/><column index="23" value="47"/><column index="24" value="62"/><column index="25" value="47"/><column index="26" value="54"/><column index="27" value="47"/><column index="28" value="78"/><column index="29" value="47"/><column index="30" value="62"/><column index="31" value="47"/><column index="32" value="47"/><column index="33" value="47"/><column index="34" value="54"/><column index="35" value="47"/><column index="36" value="47"/><column index="37" value="47"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="CovidDeaths" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort><column index="2" mode="0"/></sort><column_widths><column index="1" value="70"/><column index="2" value="61"/><column index="3" value="93"/><column index="4" value="85"/><column index="5" value="85"/><column index="6" value="72"/><column index="7" value="69"/><column index="8" value="131"/><column index="9" value="79"/><column index="10" value="76"/><column index="11" value="138"/><column index="12" value="141"/><column index="13" value="139"/><column index="14" value="201"/><column index="15" value="148"/><column index="16" value="146"/><column index="17" value="208"/><column index="18" value="109"/><column index="19" value="77"/><column index="20" value="147"/><column index="21" value="87"/><column index="22" value="157"/><column index="23" value="139"/><column index="24" value="209"/><column index="25" value="149"/><column index="26" value="219"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table></browse_table_settings></tab_browse><tab_sql><sql name="SQL 1*">Select * 
FROM CovidDeaths
WHERE continent is not NULL
order by 3,4


-- Select Data that we are going to be using 


SELECT location, date, total_cases, new_cases, total_deaths, population
FROM CovidDeaths
order by 1,2


-- Looking at Total Cases vs Total Deaths 
-- Shows likelihood of dying if you contract covid in your country

SELECT location, date, total_cases, total_deaths, total_deaths * 1.0 / total_cases *100 as death_percentage
FROM CovidDeaths

-- Looking at Total Cases vs Population 
-- Shows what percentage of population got Covid 

SELECT location, date, total_cases, population, (total_cases * 1.0 / population) *100 as percent_population_inffected
FROM CovidDeaths
Where location like '%states%'
order by 1,2

-- Looking at Countries with Highest Infection Rate compared to Population 

SELECT location, population, max(total_cases) as Highest_Infection_Count, max((total_cases * 1.0 / population)) *100 as percent_population_inffected
FROM CovidDeaths
--Where location like '%states%'
GROUP by location, population
order by Percent_Population_Inffected DESC

-- Let's Break Things Down by Continent 
-- Showing Continents with the Highest Death Count per Population 

SELECT continent, max(CAST(total_deaths as INT)) as total_death_count
FROM CovidDeaths
WHERE continent is NOT NULL
GROUP by continent
order by total_death_count DESC


-- Breaking Global Numbers 

SELECT sum(new_cases) as total_cases, sum(CAST(new_deaths as INT)) as total_deaths, sum(cast(new_deaths *1.0 as INT))/sum(new_cases * 1.0) * 100 as death_percentage
FROM CovidDeaths
WHERE continent is NOT NULL
--GROUP by date 
order by 1,2


-- Joining 2 Tables together

Select *
FROM CovidDeaths as dea 
JOIN 'Covid-Vaccinations' as vac 
	ON dea.location = vac.location 
	and dea.date = vac.date;
	
	
-- Looking at Total Population vs Vaccination

Select dea.continent, dea.location, dea.date, dea.population, vac.new_vaccinations, 
sum(CAST(vac.new_vaccinations as INT)) OVER 
(PARTITION by dea.location ORDER by dea.location, dea.date) as Rolling_People_Vaccinated
FROM CovidDeaths as dea 
JOIN 'Covid-Vaccinations' as vac 
	ON dea.location = vac.location 
	and dea.date = vac.date	
WHERE dea.continent is not NULL
order by 2,3



-- Temporary TABLE

DROP TABLE IF EXISTS Percent_Population_Vaccinated;

CREATE TEMPORARY TABLE Percent_Population_Vaccinated (
    continent NVARCHAR(255),
    location NVARCHAR(255),
    date DATETIME,
    population NUMERIC, 
    new_vaccinations NUMERIC, 
    Rolling_People_Vaccinated NUMERIC
);


INSERT INTO Percent_Population_Vaccinated
SELECT 
    dea.continent, 
    dea.location, 
    dea.date, 
    dea.population, 
    vac.new_vaccinations, 
    SUM(CAST(vac.new_vaccinations AS INT)) OVER 
    (PARTITION BY dea.location ORDER BY dea.location, dea.date) AS Rolling_People_Vaccinated
FROM 
    CovidDeaths AS dea 
JOIN 
    'Covid-Vaccinations' AS vac 
    ON dea.location = vac.location 
    AND dea.date = vac.date    
WHERE 
    dea.continent IS NOT NULL
ORDER BY 
    2, 3;


SELECT *, (Rolling_People_Vaccinated * 1.0 / population) * 100 AS Percentage_Vaccinated
FROM Percent_Population_Vaccinated;


-- Creating View to store data for later Visualization

CREATE VIEW Percent_Population_Vaccinated as
SELECT 
    dea.continent, 
    dea.location, 
    dea.date, 
    dea.population, 
    vac.new_vaccinations, 
    SUM(CAST(vac.new_vaccinations AS INT)) OVER 
    (PARTITION BY dea.location ORDER BY dea.location, dea.date) AS Rolling_People_Vaccinated
FROM 
    CovidDeaths AS dea 
JOIN 
    'Covid-Vaccinations' AS vac 
    ON dea.location = vac.location 
    AND dea.date = vac.date    
WHERE 
    dea.continent IS NOT NULL
</sql><current_tab id="0"/></tab_sql></sqlb_project>
